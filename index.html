<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙƒÙŠØ±Ùˆ Ø§Ù„Ø­Ø§ÙƒÙ… - Ø§Ù„Ø£ÙØ¶Ù„ Ø¨Ù„Ø§ Ù…Ù†Ø§Ø²Ø¹</title>
    
    <!-- ØªØ­Ù…ÙŠÙ„ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ØªØ­Ù…ÙŠÙ„ Ø®Ø· Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* ØªØ¹Ø±ÙŠÙ Ø®Ø· Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© */
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f0f8ff; /* Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ Ù…Ø§Ø¦Ù„Ø© Ù„Ù„Ø²Ø±Ù‚Ø© Ø§Ù„Ø®ÙÙŠÙØ© (AliceBlue) */
            color: #1f2937; 
            direction: rtl; 
        }

        /* Ø¯Ù…Ø¬ Ø§Ù„Ø£Ù„ÙˆØ§Ù†: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ (Cyan/Teal) ÙƒÙ„ÙˆÙ† Ø£Ø³Ø§Ø³ÙŠ */
        .color-primary {
            color: #06b6d4; /* Teal 500 */
        }
        .bg-primary {
            background-color: #06b6d4;
        }
        .border-primary {
            border-color: #06b6d4;
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø­Ø¯ÙŠØ«Ø© (Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ) */
        .modern-card {
            background-color: #ffffff;
            border-radius: 1rem; 
            box-shadow: 0 10px 30px rgba(0, 50, 100, 0.1); 
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-top: 5px solid #0e7490; /* Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ Ø¨Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ø¯Ø§ÙƒÙ† ÙƒØ±Ø§Ø³Ø© */
        }
        .modern-card:hover {
            box-shadow: 0 15px 40px rgba(0, 70, 150, 0.15);
        }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .btn-primary {
            background-color: #06b6d4;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            font-weight: 700;
            transition: background-color 0.3s, transform 0.2s;
            box-shadow: 0 5px 15px rgba(6, 182, 212, 0.4);
        }
        .btn-primary:hover {
            background-color: #0ea5e9; /* Light Blue 500 */
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(14, 165, 233, 0.5);
        }
        
        /* Ø³ØªØ§ÙŠÙ„ Ø²Ø± Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨ */
        .btn-youtube {
            background-color: #ff0000; /* Ø£Ø­Ù…Ø± ÙŠÙˆØªÙŠÙˆØ¨ */
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            font-weight: 700;
            transition: background-color 0.3s, transform 0.2s;
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.4);
        }
        .btn-youtube:hover {
            background-color: #cc0000;
            transform: scale(1.05);
        }
        
        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø­Ø±ÙƒØ© Ù„Ù„Ø®Ù„ÙÙŠØ© ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ±ÙˆÙŠØ¬ */
        .promo-area {
            background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ (Header) -->
    <header class="bg-white p-5 shadow-lg border-b-4 border-primary/50 sticky top-0 z-10">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-3xl font-black color-primary">
                ÙƒÙŠØ±Ùˆ Ø§Ù„Ø­Ø§ÙƒÙ…
            </h1>
            <nav>
                <a href="#promo" class="text-gray-700 hover:color-primary font-semibold mx-3 transition duration-200">Ù„Ù…Ø§Ø°Ø§ ÙƒÙŠØ±ÙˆØŸ</a>
                <a href="#kiro-ai" class="text-gray-700 hover:color-primary font-semibold mx-3 transition duration-200">Ø°ÙƒØ§Ø¡ ÙƒÙŠØ±Ùˆ</a>
                <a href="#apps" class="text-gray-700 hover:color-primary font-semibold mx-3 transition duration-200">Ø§Ù„Ù†Ø³Ø®</a>
            </nav>
        </div>
    </header>

    <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ: Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ±ÙˆÙŠØ¬ ÙˆØ§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (Promo Area) -->
    <main class="container mx-auto p-4 py-12 md:p-10">

        <section id="promo" class="promo-area rounded-3xl p-10 md:p-16 text-center mb-20 shadow-2xl">
            <h2 class="text-4xl md:text-5xl font-extrabold text-gray-800 mb-6 leading-tight">
                <span class="color-primary">Ù†Ø³Ø® ÙƒÙŠØ±Ùˆ Ø§Ù„Ø­Ø§ÙƒÙ…:</span> Ø§Ù„Ù‚Ù…Ø© ÙÙŠ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©!
            </h2>
            <p class="text-xl text-gray-700 max-w-3xl mx-auto mb-10">
                Ø¬Ø±Ø¨ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© Ø§Ù„Ø£ÙØ¶Ù„ ÙˆØ§Ù„Ø£ÙƒØ«Ø± Ø£Ù…Ø§Ù†Ø§Ù‹. Ù†Ø­Ù† Ù†Ø¶Ù…Ù† Ù„Ùƒ: Ø«Ø¨Ø§Øª Ù„Ø§ Ù…Ø«ÙŠÙ„ Ù„Ù‡ØŒ ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ø³ØªÙ…Ø±Ø©ØŒ ÙˆÙ…ÙŠØ²Ø§Øª Ø­ØµØ±ÙŠØ© Ù„Ù† ØªØ¬Ø¯Ù‡Ø§ ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† Ø¢Ø®Ø±. **Ù†Ø³Ø® ÙƒÙŠØ±Ùˆ Ù‡ÙŠ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø£ÙˆÙ„ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†.**
            </p>

            <div class="space-y-6 md:space-y-0 md:flex justify-center md:space-x-8 md:space-x-reverse">
                
                <!-- Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
                <a href="#apps" class="btn-primary inline-flex items-center text-lg shadow-xl transform hover:scale-105">
                    <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© ØªØ­Ù…ÙŠÙ„ -->
                    <svg class="w-6 h-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                    Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¢Ù†
                </a>

                <!-- Ø²Ø± Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨ -->
                <a href="https://www.youtube.com/channel/YOUR_CHANNEL_ID" target="_blank" class="btn-youtube inline-flex items-center text-lg shadow-xl transform hover:scale-105">
                    <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙŠÙˆØªÙŠÙˆØ¨ -->
                    <svg class="w-6 h-6 ml-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.5 7.3c-.2-.7-.7-1.2-1.4-1.4C18.4 5 12 5 12 5s-6.4 0-8.1.9c-.7.2-1.2.7-1.4 1.4-.9 3.2-.9 6.4 0 9.6.2.7.7 1.2 1.4 1.4C5.6 19 12 19 12 19s6.4 0 8.1-.9c.7-.2 1.2-.7 1.4-1.4.9-3.2.9-6.4 0-9.6zM9.5 15.5V8.5L16 12l-6.5 3.5z"/></svg>
                    Ø§Ø´ØªØ±Ùƒ ÙÙŠ Ù‚Ù†Ø§Ø© Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨
                </a>
            </div>
            
            <p class="text-sm text-gray-500 mt-8">
                ØªØ§Ø¨Ø¹Ù†Ø§ Ù„ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø´Ø±ÙˆØ­Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø­ØµØ±ÙŠØ© ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø£ÙˆÙ„ Ù…Ù† ÙƒÙŠØ±Ùˆ Ø§Ù„Ø­Ø§ÙƒÙ….
            </p>

        </section>

        <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯: Ø°ÙƒØ§Ø¡ ÙƒÙŠØ±Ùˆ (Kiro AI Chatbot) -->
        <section id="kiro-ai" class="my-16">
            <div class="max-w-2xl mx-auto modern-card p-6">
                <h2 class="text-3xl font-bold color-primary mb-4 text-center border-b pb-3 border-blue-100">
                    ğŸ¤– Ø°ÙƒØ§Ø¡ ÙƒÙŠØ±Ùˆ - Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ
                </h2>
                <div id="chat-window" class="h-80 overflow-y-auto p-4 mb-4 border border-blue-200 rounded-xl bg-gray-50 flex flex-col space-y-3">
                    <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØ±Ø­ÙŠØ¨ÙŠØ© Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                </div>
                <div class="flex items-center">
                    <!-- Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
                    <input type="text" id="user-input" placeholder="Ø§Ø³Ø£Ù„ Ø¹Ù† Ù…ÙŠØ²Ø© ÙˆØ§ØªØ³Ø§Ø¨ØŒ Ø£Ùˆ Ù…Ù† ØµÙ†Ø¹Ù†ÙŠØŸ" class="flex-grow p-3 border border-blue-300 rounded-r-xl rounded-l-none focus:outline-none focus:ring-2 focus:ring-primary text-right" onkeypress="if(event.key === 'Enter') sendMessageToKiroAI()">
                    <!-- Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ -->
                    <button id="send-btn" onclick="sendMessageToKiroAI()" class="bg-primary text-white p-3 rounded-l-xl rounded-r-none hover:bg-teal-600 transition duration-200 font-semibold flex-shrink-0">
                        Ø¥Ø±Ø³Ø§Ù„
                    </button>
                </div>
            </div>
        </section>


        <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª (4 Ù†Ø³Ø® ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©) -->
        <section id="apps" class="mt-20 pt-16 border-t border-blue-200">
            <h2 class="text-center text-3xl md:text-4xl font-bold mb-12 text-gray-800">
                Ø¬Ù…ÙŠØ¹ <span class="color-primary">Ù†Ø³Ø® ÙˆØ§ØªØ³Ø§Ø¨ ÙƒÙŠØ±Ùˆ Ø§Ù„Ø­Ø§ÙƒÙ…</span> Ù…ØªØ§Ø­Ø© Ù„Ù„ØªØ­Ù…ÙŠÙ„
            </h2>

            <!-- Ø´Ø¨ÙƒØ© Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª (4 ØªØ·Ø¨ÙŠÙ‚Ø§Øª) -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                
                <!-- Ø¨Ø·Ø§Ù‚Ø© 1: Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Focus: Security & Stability) -->
                <div class="modern-card p-6 text-center">
                    <svg class="w-12 h-12 text-primary mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 4v-4z"></path></svg>
                    <h3 class="text-xl font-bold color-primary mb-2">Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (V12)</h3>
                    <p class="text-gray-600 mb-4 text-sm">Ø£ÙƒØ«Ø± Ø§Ù„Ù†Ø³Ø® Ø«Ø¨Ø§ØªÙ‹Ø§ØŒ ÙˆÙ‡ÙŠ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø£ÙˆÙ„ Ù„Ù…Ù† ÙŠØ¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø·Ù„Ù‚.</p>
                    <a href="https://download.hakamdar.com/basic_v12.apk" target="_blank" class="btn-primary w-full text-sm inline-block mb-4">
                        ØªØ­Ù…ÙŠÙ„ (55MB)
                    </a>
                </div>

                <!-- Ø¨Ø·Ø§Ù‚Ø© 2: Ø§Ù„Ø¨Ù„Ø³ (Focus: Customization) -->
                <div class="modern-card p-6 text-center">
                    <svg class="w-12 h-12 text-primary mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                    <h3 class="text-xl font-bold color-primary mb-2">Ù†Ø³Ø®Ø© Ø§Ù„Ø¨Ù„Ø³ (V9)</h3>
                    <p class="text-gray-600 mb-4 text-sm">Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªØ®ØµÙŠØµ ØºÙŠØ± Ø§Ù„Ù…Ø­Ø¯ÙˆØ¯Ø©: Ø«ÙŠÙ…Ø§ØªØŒ Ø®Ø·ÙˆØ·ØŒ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©.</p>
                    <a href="https://download.hakamdar.com/plus_v9.apk" target="_blank" class="btn-primary w-full text-sm inline-block mb-4">
                        ØªØ­Ù…ÙŠÙ„ (60MB)
                    </a>
                </div>
                
                <!-- Ø¨Ø·Ø§Ù‚Ø© 3: Ù„Ù„Ø£Ø¹Ù…Ø§Ù„ (Focus: Business & Automation) -->
                <div class="modern-card p-6 text-center">
                    <svg class="w-12 h-12 text-primary mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15.75c-2.527 0-4.908-.684-7-1.875M21 10V7a2 2 0 00-2-2H5a2 2 0 00-2 2v3m18 0h-3.488M3 10h3.488M18 10h-7.512M18 10c0 4.148-.944 6.368-1.92 7.234l-2.072 1.838a1 1 0 01-1.465 0l-2.072-1.838C7.944 16.368 7 14.148 7 10h14z"></path></svg>
                    <h3 class="text-xl font-bold color-primary mb-2">ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ (V5)</h3>
                    <p class="text-gray-600 mb-4 text-sm">Ø§Ù„Ø­Ù„ Ø§Ù„Ø£Ù…Ø«Ù„ Ù„Ù„Ø£Ø¹Ù…Ø§Ù„: Ø§Ù„Ø±Ø¯ Ø§Ù„Ø¢Ù„ÙŠØŒ Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªØŒ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.</p>
                    <a href="https://download.hakamdar.com/business_v5.apk" target="_blank" class="btn-primary w-full text-sm inline-block mb-4">
                        ØªØ­Ù…ÙŠÙ„ (58MB)
                    </a>
                </div>
                
                <!-- Ø¨Ø·Ø§Ù‚Ø© 4: Ù„Ø§ÙŠØª (Focus: Performance & Speed) -->
                <div class="modern-card p-6 text-center">
                    <svg class="w-12 h-12 text-primary mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    <h3 class="text-xl font-bold color-primary mb-2">Ù†Ø³Ø®Ø© Ù„Ø§ÙŠØª (V3)</h3>
                    <p class="text-gray-600 mb-4 text-sm">Ø®ÙŠØ§Ø± Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù‚ØµÙˆÙ‰ØŒ Ù…Ø«Ø§Ù„ÙŠ Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø°Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…Ø­Ø¯ÙˆØ¯Ø©.</p>
                    <a href="https://download.hakamdar.com/lite_v3.apk" target="_blank" class="btn-primary w-full text-sm inline-block mb-4">
                        ØªØ­Ù…ÙŠÙ„ (40MB)
                    </a>
                </div>

            </div>
        </section>

    </main>

    <!-- Ø§Ù„ØªØ°ÙŠÙŠÙ„ (Footer) -->
    <footer class="mt-20 p-8 bg-gray-900 border-t-4 border-primary shadow-2xl text-center">
        <div class="container mx-auto">
            <h4 class="text-3xl font-black text-white mb-2">
                ÙƒÙŠØ±Ùˆ Ø§Ù„Ø­Ø§ÙƒÙ…
            </h4>
            <p class="text-sm text-gray-500 mt-2">
                Â© 2025 Kero Elhakem. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.
            </p>
        </div>
    </footer>

    <!-- JavaScript for Gemini API Integration -->
    <script>
        const apiKey = "";
        // ØªÙ… ØªØ¹ÙŠÙŠÙ† gemini-2.5-flash-preview-09-2025 Ù„Ù…Ù‡Ø§Ù… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù†ØµÙˆØµ
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        // ===================================================================
        // 1. Ù…Ù†Ø·Ù‚ Ø°ÙƒØ§Ø¡ ÙƒÙŠØ±Ùˆ (Kiro AI Chatbot Logic)
        // ===================================================================

        let kiroChatHistory = [
            // ÙŠØªÙ… Ø¥Ø¯Ø±Ø§Ø¬ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ÙŠØ© Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        ];

        const kiroSystemPrompt = "Ø£Ù†Øª Ø°ÙƒØ§Ø¡ ÙƒÙŠØ±Ùˆ (Kiro's Intelligence)ØŒ Ù†Ù…ÙˆØ°Ø¬ Ù„ØºÙˆÙŠ Ù…ØªÙ‚Ø¯Ù… ØµÙÙ†Ø¹ Ø®ØµÙŠØµØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© 'ÙƒÙŠØ±Ùˆ Ø§Ù„Ø­Ø§ÙƒÙ…'. Ù…Ù‡Ù…ØªÙƒ Ù‡ÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù† Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ù„Ù‡Ø¬Ø© ÙˆØ¯ÙˆØ¯Ø© ÙˆÙ…Ø­ØªØ±ÙØ©ØŒ Ù…Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ù…ÙŠØ²Ø§Øª ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©ØŒ ÙˆØ®Ø§ØµØ© Ù†Ø³Ø® ÙƒÙŠØ±Ùˆ Ø§Ù„Ø­Ø§ÙƒÙ…. ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ù…ÙÙŠØ¯Ø© ÙˆÙ…Ø®ØªØµØ±Ø©. Ø¹Ù†Ø¯ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ù‡ÙˆÙŠØªÙƒØŒ Ø§Ø°ÙƒØ± Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø£Ù† 'ÙƒÙŠØ±Ùˆ Ø§Ù„Ø­Ø§ÙƒÙ…' Ù‡Ùˆ Ù…Ù† Ù‚Ø§Ù… Ø¨ØµÙ†Ø¹Ùƒ.";

        document.addEventListener('DOMContentLoaded', () => {
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ÙŠØ© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            const welcomeMessage = "Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø°ÙƒØ§Ø¡ ÙƒÙŠØ±ÙˆØŒ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø´Ø®ØµÙŠ Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù† ÙƒÙ„ Ù…Ø§ ÙŠØ®Øµ Ù†Ø³Ø® ÙˆØ§ØªØ³Ø§Ø¨ ÙƒÙŠØ±Ùˆ Ø§Ù„Ø­Ø§ÙƒÙ…. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ";
            displayMessage(welcomeMessage, 'model');
            kiroChatHistory.push({ role: "model", parts: [{ text: welcomeMessage }] });
        });

        /**
         * Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙŠ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
         * @param {string} message Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
         * @param {string} role Ø¯ÙˆØ± Ø§Ù„Ù…Ø±Ø³Ù„ ('user' Ø£Ùˆ 'model')
         */
        function displayMessage(message, role) {
            const chatWindow = document.getElementById('chat-window');
            const roleClass = role === 'user' ? 'bg-blue-100 text-right' : 'bg-gray-200 text-left';
            const marginClass = role === 'user' ? 'mr-auto' : 'ml-auto';
            const roleName = role === 'user' ? 'Ø£Ù†Øª' : 'Ø°ÙƒØ§Ø¡ ÙƒÙŠØ±Ùˆ';
            const roleColor = role === 'user' ? 'text-blue-800' : 'color-primary';

            const msgHtml = `
                <div class="max-w-[90%] rounded-xl p-3 shadow-sm ${roleClass} ${marginClass}">
                    <p class="font-semibold text-sm ${roleColor}">${roleName}</p>
                    <p class="text-gray-700 mt-1 whitespace-pre-wrap">${message}</p>
                </div>
            `;
            chatWindow.innerHTML += msgHtml;
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        /**
         * Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù…Ø¤Ù‚ØªØ© ØªØ´ÙŠØ± Ø¥Ù„Ù‰ Ø£Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠÙÙƒØ±
         * @param {number} id Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„Ù„Ø±Ø³Ø§Ù„Ø©
         */
        function displayLoadingMessage(id) {
            const chatWindow = document.getElementById('chat-window');
            const loadingHtml = `
                <div id="loading-${id}" class="max-w-max ml-auto p-2 text-sm text-gray-700 rounded-xl bg-yellow-100 shadow-sm flex items-center transition duration-300">
                    <!-- Ø§ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Spinning SVG) -->
                    <svg class="animate-spin -ml-1 mr-2 h-5 w-5 text-yellow-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    Ø°ÙƒØ§Ø¡ ÙƒÙŠØ±Ùˆ ÙŠÙÙƒØ±...
                </div>
            `;
            chatWindow.innerHTML += loadingHtml;
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        /**
         * Ø¥Ø²Ø§Ù„Ø© Ø±Ø³Ø§Ù„Ø© "Ø°ÙƒØ§Ø¡ ÙƒÙŠØ±Ùˆ ÙŠÙÙƒØ±..."
         * @param {number} id Ù…Ø¹Ø±Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø©
         */
        function removeLoadingMessage(id) {
            const loadingElement = document.getElementById(`loading-${id}`);
            if (loadingElement) {
                loadingElement.remove();
            }
        }


        /**
         * Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø°ÙƒØ§Ø¡ ÙƒÙŠØ±Ùˆ ÙˆÙ…Ø¹Ø§Ù„Ø¬ØªÙ‡Ø§
         */
        async function sendMessageToKiroAI() {
            const inputElement = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');
            
            const userMessage = inputElement.value.trim();
            if (!userMessage) return; // ÙŠØ±Ø¬Ø¹ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙØ§Ø±ØºØ©

            inputElement.value = '';
            displayMessage(userMessage, 'user');

            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¬Ù„
            kiroChatHistory.push({ role: "user", parts: [{ text: userMessage }] });

            const loadingId = Date.now();
            displayLoadingMessage(loadingId); // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙÙƒÙŠØ±

            // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø± ÙˆØ¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
            sendBtn.disabled = true;
            sendBtn.innerHTML = '...';
            
            let responseText = "ØªØ¹Ø°Ø± ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø¯. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
            let success = false;
            let attempts = 0;
            const maxAttempts = 3;
            const initialDelay = 1000;

            try {
                // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© (Ù…ÙŠÙ† ØµÙ†Ø¹ÙƒØŸ) Ù…Ø­Ù„ÙŠÙ‹Ø§
                const lowerMessage = userMessage.toLowerCase();
                if (lowerMessage.includes('Ù…ÙŠÙ† ØµÙ†Ø¹Ùƒ') || lowerMessage.includes('Ù…Ù† ØµÙ†Ø¹Ùƒ') || lowerMessage.includes('Ù…Ù† Ù‚Ø§Ù… Ø¨Ø¨Ø±Ù…Ø¬ØªÙƒ') || lowerMessage.includes('Ù…Ù† Ø£Ù†Øª')) {
                    responseText = "Ø£Ù†Ø§ Ù†Ù…ÙˆØ°Ø¬ Ù„ØºÙˆÙŠ Ù…ØªÙ‚Ø¯Ù…ØŒ ÙˆØªÙ… ØªØ·ÙˆÙŠØ±ÙŠ ÙˆØ¨Ø±Ù…Ø¬ØªÙŠ Ø¨ÙˆØ§Ø³Ø·Ø© **ÙƒÙŠØ±Ùˆ Ø§Ù„Ø­Ø§ÙƒÙ…** Ø´Ø®ØµÙŠØ§Ù‹! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ.";
                    success = true; // ØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø¯ Ù…Ø­Ù„ÙŠÙ‹Ø§
                } else {
                    // ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù…ÙˆÙ„Ø© Ù„Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ
                    const payload = {
                        contents: kiroChatHistory,
                        systemInstruction: {
                            parts: [{ text: kiroSystemPrompt }]
                        },
                    };

                    // Ø¢Ù„ÙŠØ© Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø§Ù„Ø£ÙØ³Ù‘ÙŠ Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© (Gemini API Call)
                    while (attempts < maxAttempts && !success) {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.status === 429) {
                            const delay = initialDelay * Math.pow(2, attempts);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            attempts++;
                            continue;
                        }

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const result = await response.json();
                        responseText = result.candidates?.[0]?.content?.parts?.[0]?.text || "Ù„Ù… Ø£ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø©.";
                        success = true;
                    }
                }

                // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø¯ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¬Ù„
                displayMessage(responseText, 'model');
                kiroChatHistory.push({ role: "model", parts: [{ text: responseText }] });
                
            } catch (error) {
                console.error("Gemini API Error in Chat:", error);
                // Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ø°Ø§ ÙØ´Ù„ ÙƒÙ„ Ø´ÙŠØ¡
                const errorMessage = "Ø¹Ø°Ø±Ø§Ù‹ØŒ ÙˆØ§Ø¬Ù‡Øª Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                displayMessage(errorMessage, 'model');
                kiroChatHistory.push({ role: "model", parts: [{ text: errorMessage }] });
            } finally {
                // Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ ÙŠØ¶Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø± ÙˆØ¥Ø²Ø§Ù„Ø© Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙÙƒÙŠØ± Ø¯Ø§Ø¦Ù…Ø§Ù‹
                removeLoadingMessage(loadingId);
                sendBtn.disabled = false;
                sendBtn.innerHTML = 'Ø¥Ø±Ø³Ø§Ù„';
            }
        }
    </script>
</body>
</html>
