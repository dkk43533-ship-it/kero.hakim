<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุฑู ุงูุญุงูู - ุงูุฃูุถู ุจูุง ููุงุฒุน</title>
    
    <!-- ุชุญููู Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ุชุญููู ุฎุท ุงููุงูุฑุฉ -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* ุชุนุฑูู ุฎุท ุงููุงูุฑุฉ */
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f0f8ff; /* ุฎูููุฉ ุจูุถุงุก ูุงุฆูุฉ ููุฒุฑูุฉ ุงูุฎูููุฉ (AliceBlue) */
            color: #1f2937; 
            direction: rtl; 
        }

        /* ุฏูุฌ ุงูุฃููุงู: ุงุณุชุฎุฏุงู ุงูุฃุฒุฑู ุงูุณูุงูู (Cyan/Teal) ูููู ุฃุณุงุณู */
        .color-primary {
            color: #06b6d4; /* Teal 500 */
        }
        .bg-primary {
            background-color: #06b6d4;
        }
        .border-primary {
            border-color: #06b6d4;
        }

        /* ุชุตููู ุงูุจุทุงูุฉ ุงูุญุฏูุซุฉ (ููุชุทุจููุงุช ูุงูุฐูุงุก ุงูุงุตุทูุงุนู) */
        .modern-card {
            background-color: #ffffff;
            border-radius: 1rem; 
            box-shadow: 0 10px 30px rgba(0, 50, 100, 0.1); 
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-top: 5px solid #0e7490; /* ุดุฑูุท ุนููู ุจููู ุฃุฒุฑู ุฏุงูู ูุฑุงุณุฉ */
        }
        .modern-card:hover {
            box-shadow: 0 15px 40px rgba(0, 70, 150, 0.15);
        }

        /* ุณุชุงูู ุงูุฃุฒุฑุงุฑ ุงูุฑุฆูุณูุฉ */
        .btn-primary {
            background-color: #06b6d4;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            font-weight: 700;
            transition: background-color 0.3s, transform 0.2s;
            box-shadow: 0 5px 15px rgba(6, 182, 212, 0.4);
        }
        .btn-primary:hover {
            background-color: #0ea5e9; /* Light Blue 500 */
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(14, 165, 233, 0.5);
        }
        
        /* ุณุชุงูู ุฒุฑ ุงูููุชููุจ */
        .btn-youtube {
            background-color: #ff0000; /* ุฃุญูุฑ ููุชููุจ */
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            font-weight: 700;
            transition: background-color 0.3s, transform 0.2s;
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.4);
        }
        .btn-youtube:hover {
            background-color: #cc0000;
            transform: scale(1.05);
        }
        
        /* ุชุฃุซูุฑ ุงูุญุฑูุฉ ููุฎูููุฉ ูู ููุทูุฉ ุงูุชุฑููุฌ */
        .promo-area {
            background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- ุดุฑูุท ุงูุชููู (Header) -->
    <header class="bg-white p-5 shadow-lg border-b-4 border-primary/50 sticky top-0 z-10">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-3xl font-black color-primary">
                ููุฑู ุงูุญุงูู
            </h1>
            <nav>
                <a href="#promo" class="text-gray-700 hover:color-primary font-semibold mx-3 transition duration-200">ููุงุฐุง ููุฑูุ</a>
                <a href="#kiro-ai" class="text-gray-700 hover:color-primary font-semibold mx-3 transition duration-200">ุฐูุงุก ููุฑู</a>
                <a href="#apps" class="text-gray-700 hover:color-primary font-semibold mx-3 transition duration-200">ุงููุณุฎ</a>
            </nav>
        </div>
    </header>

    <!-- ุงููุณู ุงูุฑุฆูุณู: ููุทูุฉ ุงูุชุฑููุฌ ูุงูุงุดุชุฑุงู (Promo Area) -->
    <main class="container mx-auto p-4 py-12 md:p-10">

        <section id="promo" class="promo-area rounded-3xl p-10 md:p-16 text-center mb-20 shadow-2xl">
            <h2 class="text-4xl md:text-5xl font-extrabold text-gray-800 mb-6 leading-tight">
                <span class="color-primary">ูุณุฎ ููุฑู ุงูุญุงูู:</span> ุงูููุฉ ูู ุงูุฃุฏุงุก ูุงูุฎุตูุตูุฉ!
            </h2>
            <p class="text-xl text-gray-700 max-w-3xl mx-auto mb-10">
                ุฌุฑุจ ุงููุณุฎ ุงููุนุฏูุฉ ุงูุฃูุถู ูุงูุฃูุซุฑ ุฃูุงูุงู. ูุญู ูุถูู ูู: ุซุจุงุช ูุง ูุซูู ููุ ุชุญุฏูุซุงุช ูุณุชูุฑุฉุ ูููุฒุงุช ุญุตุฑูุฉ ูู ุชุฌุฏูุง ูู ุฃู ููุงู ุขุฎุฑ. **ูุณุฎ ููุฑู ูู ุงูุฎูุงุฑ ุงูุฃูู ูููุณุชุฎุฏููู.**
            </p>

            <div class="space-y-6 md:space-y-0 md:flex justify-center md:space-x-8 md:space-x-reverse">
                
                <!-- ุฒุฑ ุงูุชุญููู ุงูุฑุฆูุณู -->
                <a href="#apps" class="btn-primary inline-flex items-center text-lg shadow-xl transform hover:scale-105">
                    <!-- ุฃููููุฉ ุชุญููู -->
                    <svg class="w-6 h-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                    ุงุจุฏุฃ ุงูุชุญููู ุงูุขู
                </a>

                <!-- ุฒุฑ ุงูููุชููุจ -->
                <a href="https://www.youtube.com/channel/YOUR_CHANNEL_ID" target="_blank" class="btn-youtube inline-flex items-center text-lg shadow-xl transform hover:scale-105">
                    <!-- ุฃููููุฉ ููุชููุจ -->
                    <svg class="w-6 h-6 ml-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.5 7.3c-.2-.7-.7-1.2-1.4-1.4C18.4 5 12 5 12 5s-6.4 0-8.1.9c-.7.2-1.2.7-1.4 1.4-.9 3.2-.9 6.4 0 9.6.2.7.7 1.2 1.4 1.4C5.6 19 12 19 12 19s6.4 0 8.1-.9c.7-.2 1.2-.7 1.4-1.4.9-3.2.9-6.4 0-9.6zM9.5 15.5V8.5L16 12l-6.5 3.5z"/></svg>
                    ุงุดุชุฑู ูู ููุงุฉ ุงูููุชููุจ
                </a>
            </div>
            
            <p class="text-sm text-gray-500 mt-8">
                ุชุงุจุนูุง ูุชุญุตู ุนูู ุดุฑูุญุงุช ุงูููุฒุงุช ุงูุญุตุฑูุฉ ูุงูุชุญุฏูุซุงุช ุฃููุงู ุจุฃูู ูู ููุฑู ุงูุญุงูู.
            </p>

        </section>

        <!-- ุงููุณู ุงูุฌุฏูุฏ: ุฐูุงุก ููุฑู (Kiro AI Chatbot) -->
        <section id="kiro-ai" class="my-16">
            <div class="max-w-2xl mx-auto modern-card p-6">
                <h2 class="text-3xl font-bold color-primary mb-4 text-center border-b pb-3 border-blue-100">
                    ๐ค ุฐูุงุก ููุฑู - ูุณุงุนุฏู ุงูุฐูู
                </h2>
                <div id="chat-window" class="h-80 overflow-y-auto p-4 mb-4 border border-blue-200 rounded-xl bg-gray-50 flex flex-col space-y-3">
                    <!-- ุงูุฑุณุงุฆู ุงูุชุฑุญูุจูุฉ ุณูุชู ุฅุถุงูุชูุง ุจูุงุณุทุฉ JavaScript -->
                </div>
                <div class="flex items-center">
                    <!-- ุญูู ุงูุฅุฏุฎุงู -->
                    <input type="text" id="user-input" placeholder="ุงุณุฃู ุนู ููุฒุฉ ูุงุชุณุงุจุ ุฃู ูู ุตูุนููุ" class="flex-grow p-3 border border-blue-300 rounded-r-xl rounded-l-none focus:outline-none focus:ring-2 focus:ring-primary text-right" onkeypress="if(event.key === 'Enter') sendMessageToKiroAI()">
                    <!-- ุฒุฑ ุงูุฅุฑุณุงู -->
                    <button id="send-btn" onclick="sendMessageToKiroAI()" class="bg-primary text-white p-3 rounded-l-xl rounded-r-none hover:bg-teal-600 transition duration-200 font-semibold flex-shrink-0">
                        ุฅุฑุณุงู
                    </button>
                </div>
            </div>
        </section>


        <!-- ุงููุณู ุงูุซุงูู: ุงูุชุทุจููุงุช (4 ูุณุฎ ูู ุงูููุงูุฉ) -->
        <section id="apps" class="mt-20 pt-16 border-t border-blue-200">
            <h2 class="text-center text-3xl md:text-4xl font-bold mb-12 text-gray-800">
                ุฌููุน <span class="color-primary">ูุณุฎ ูุงุชุณุงุจ ููุฑู ุงูุญุงูู</span> ูุชุงุญุฉ ููุชุญููู
            </h2>

            <!-- ุดุจูุฉ ุจุทุงูุงุช ุงูุชุทุจููุงุช (4 ุชุทุจููุงุช) -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                
                <!-- ุจุทุงูุฉ 1: ุงูุฃุณุงุณูุฉ (Focus: Security & Stability) -->
                <div class="modern-card p-6 text-center">
                    <svg class="w-12 h-12 text-primary mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 4v-4z"></path></svg>
                    <h3 class="text-xl font-bold color-primary mb-2">ุงููุณุฎุฉ ุงูุฃุณุงุณูุฉ (V12)</h3>
                    <p class="text-gray-600 mb-4 text-sm">ุฃูุซุฑ ุงููุณุฎ ุซุจุงุชูุงุ ููู ุงูุฎูุงุฑ ุงูุฃูู ููู ูุจุญุซ ุนู ุงูุฃูุงู ุงููุทูู.</p>
                    <a href="https://download.hakamdar.com/basic_v12.apk" target="_blank" class="btn-primary w-full text-sm inline-block mb-4">
                        ุชุญููู (55MB)
                    </a>
                </div>

                <!-- ุจุทุงูุฉ 2: ุงูุจูุณ (Focus: Customization) -->
                <div class="modern-card p-6 text-center">
                    <svg class="w-12 h-12 text-primary mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                    <h3 class="text-xl font-bold color-primary mb-2">ูุณุฎุฉ ุงูุจูุณ (V9)</h3>
                    <p class="text-gray-600 mb-4 text-sm">ููุฒุงุช ุงูุชุฎุตูุต ุบูุฑ ุงููุญุฏูุฏุฉ: ุซููุงุชุ ุฎุทูุทุ ูุชุนุฏูู ุงููุงุฌูุฉ.</p>
                    <a href="https://download.hakamdar.com/plus_v9.apk" target="_blank" class="btn-primary w-full text-sm inline-block mb-4">
                        ุชุญููู (60MB)
                    </a>
                </div>
                
                <!-- ุจุทุงูุฉ 3: ููุฃุนูุงู (Focus: Business & Automation) -->
                <div class="modern-card p-6 text-center">
                    <svg class="w-12 h-12 text-primary mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15.75c-2.527 0-4.908-.684-7-1.875M21 10V7a2 2 0 00-2-2H5a2 2 0 00-2 2v3m18 0h-3.488M3 10h3.488M18 10h-7.512M18 10c0 4.148-.944 6.368-1.92 7.234l-2.072 1.838a1 1 0 01-1.465 0l-2.072-1.838C7.944 16.368 7 14.148 7 10h14z"></path></svg>
                    <h3 class="text-xl font-bold color-primary mb-2">ูุงุชุณุงุจ ุงูุฃุนูุงู (V5)</h3>
                    <p class="text-gray-600 mb-4 text-sm">ุงูุญู ุงูุฃูุซู ููุฃุนูุงู: ุงูุฑุฏ ุงูุขููุ ุฅุญุตุงุฆูุงุชุ ูุฅุฏุงุฑุฉ ุงูุนููุงุก.</p>
                    <a href="https://download.hakamdar.com/business_v5.apk" target="_blank" class="btn-primary w-full text-sm inline-block mb-4">
                        ุชุญููู (58MB)
                    </a>
                </div>
                
                <!-- ุจุทุงูุฉ 4: ูุงูุช (Focus: Performance & Speed) -->
                <div class="modern-card p-6 text-center">
                    <svg class="w-12 h-12 text-primary mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    <h3 class="text-xl font-bold color-primary mb-2">ูุณุฎุฉ ูุงูุช (V3)</h3>
                    <p class="text-gray-600 mb-4 text-sm">ุฎูุงุฑ ุงูุณุฑุนุฉ ุงููุตููุ ูุซุงูู ููุฃุฌูุฒุฉ ุฐุงุช ุงูููุงุฑุฏ ุงููุญุฏูุฏุฉ.</p>
                    <a href="https://download.hakamdar.com/lite_v3.apk" target="_blank" class="btn-primary w-full text-sm inline-block mb-4">
                        ุชุญููู (40MB)
                    </a>
                </div>

            </div>
        </section>

    </main>

    <!-- ุงูุชุฐููู (Footer) -->
    <footer class="mt-20 p-8 bg-gray-900 border-t-4 border-primary shadow-2xl text-center">
        <div class="container mx-auto">
            <h4 class="text-3xl font-black text-white mb-2">
                ููุฑู ุงูุญุงูู
            </h4>
            <p class="text-sm text-gray-500 mt-2">
                ยฉ 2025 Kero Elhakem. ุฌููุน ุงูุญููู ูุญููุธุฉ.
            </p>
        </div>
    </footer>

    <!-- JavaScript for Gemini API Integration -->
    <script>
        const apiKey = "";
        // ุชู ุชุนููู gemini-2.5-flash-preview-09-2025 ูููุงู ุชูููุฏ ุงููุตูุต
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        // ===================================================================
        // 1. ููุทู ุฐูุงุก ููุฑู (Kiro AI Chatbot Logic)
        // ===================================================================

        let kiroChatHistory = [
            // ูุชู ุฅุฏุฑุงุฌ ุฑุณุงูุฉ ุชุฑุญูุจูุฉ ุจุนุฏ ุชุญููู ุงูุตูุญุฉ
        ];

        const kiroSystemPrompt = "ุฃูุช ุฐูุงุก ููุฑู (Kiro's Intelligence)ุ ูููุฐุฌ ูุบูู ูุชูุฏู ุตููุน ุฎุตูุตุงู ุจูุงุณุทุฉ 'ููุฑู ุงูุญุงูู'. ูููุชู ูู ุงูุฅุฌุงุจุฉ ุนู ุฃุณุฆูุฉ ุงููุณุชุฎุฏููู ุจุงููุบุฉ ุงูุนุฑุจูุฉ ุจููุฌุฉ ูุฏูุฏุฉ ููุญุชุฑูุฉุ ูุน ุงูุชุฑููุฒ ุนูู ููุฒุงุช ุชุทุจููุงุช ูุงุชุณุงุจ ุงููุนุฏูุฉุ ูุฎุงุตุฉ ูุณุฎ ููุฑู ุงูุญุงูู. ูุฌุจ ุฃู ุชููู ุฅุฌุงุจุงุชู ูููุฏุฉ ููุฎุชุตุฑุฉ. ุนูุฏ ุงูุณุคุงู ุนู ูููุชูุ ุงุฐูุฑ ุฏุงุฆูุงู ุฃู 'ููุฑู ุงูุญุงูู' ูู ูู ูุงู ุจุตูุนู.";

        document.addEventListener('DOMContentLoaded', () => {
            // ุฅุถุงูุฉ ุงูุฑุณุงูุฉ ุงูุชุฑุญูุจูุฉ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
            const welcomeMessage = "ูุฑุญุจุงู! ุฃูุง ุฐูุงุก ููุฑูุ ูุณุงุนุฏู ุงูุดุฎุตู ููุฅุฌุงุจุฉ ุนู ูู ูุง ูุฎุต ูุณุฎ ูุงุชุณุงุจ ููุฑู ุงูุญุงูู. ููู ูููููู ูุณุงุนุฏุชูุ";
            displayMessage(welcomeMessage, 'model');
            kiroChatHistory.push({ role: "model", parts: [{ text: welcomeMessage }] });
        });

        /**
         * ุนุฑุถ ุงูุฑุณุงูุฉ ูู ูุงูุฐุฉ ุงูุฏุฑุฏุดุฉ
         * @param {string} message ูุญุชูู ุงูุฑุณุงูุฉ
         * @param {string} role ุฏูุฑ ุงููุฑุณู ('user' ุฃู 'model')
         */
        function displayMessage(message, role) {
            const chatWindow = document.getElementById('chat-window');
            const roleClass = role === 'user' ? 'bg-blue-100 text-right' : 'bg-gray-200 text-left';
            const marginClass = role === 'user' ? 'mr-auto' : 'ml-auto';
            const roleName = role === 'user' ? 'ุฃูุช' : 'ุฐูุงุก ููุฑู';
            const roleColor = role === 'user' ? 'text-blue-800' : 'color-primary';

            const msgHtml = `
                <div class="max-w-[90%] rounded-xl p-3 shadow-sm ${roleClass} ${marginClass}">
                    <p class="font-semibold text-sm ${roleColor}">${roleName}</p>
                    <p class="text-gray-700 mt-1 whitespace-pre-wrap">${message}</p>
                </div>
            `;
            chatWindow.innerHTML += msgHtml;
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        /**
         * ุนุฑุถ ุฑุณุงูุฉ ูุคูุชุฉ ุชุดูุฑ ุฅูู ุฃู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูููุฑ
         * @param {number} id ูุนุฑู ูุฑูุฏ ููุฑุณุงูุฉ
         */
        function displayLoadingMessage(id) {
            const chatWindow = document.getElementById('chat-window');
            const loadingHtml = `
                <div id="loading-${id}" class="max-w-max ml-auto p-2 text-sm text-gray-700 rounded-xl bg-yellow-100 shadow-sm flex items-center transition duration-300">
                    <!-- ุงููููุฉ ุงูุชุญููู (Spinning SVG) -->
                    <svg class="animate-spin -ml-1 mr-2 h-5 w-5 text-yellow-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    ุฐูุงุก ููุฑู ูููุฑ...
                </div>
            `;
            chatWindow.innerHTML += loadingHtml;
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        /**
         * ุฅุฒุงูุฉ ุฑุณุงูุฉ "ุฐูุงุก ููุฑู ูููุฑ..."
         * @param {number} id ูุนุฑู ุงูุฑุณุงูุฉ
         */
        function removeLoadingMessage(id) {
            const loadingElement = document.getElementById(`loading-${id}`);
            if (loadingElement) {
                loadingElement.remove();
            }
        }


        /**
         * ุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู ุฐูุงุก ููุฑู ููุนุงูุฌุชูุง
         */
        async function sendMessageToKiroAI() {
            const inputElement = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');
            
            const userMessage = inputElement.value.trim();
            if (!userMessage) return; // ูุฑุฌุน ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ูุงุฑุบุฉ

            inputElement.value = '';
            displayMessage(userMessage, 'user');

            // ุฅุถุงูุฉ ุฑุณุงูุฉ ุงููุณุชุฎุฏู ุฅูู ุงูุณุฌู
            kiroChatHistory.push({ role: "user", parts: [{ text: userMessage }] });

            const loadingId = Date.now();
            displayLoadingMessage(loadingId); // ุนุฑุถ ุฑุณุงูุฉ ุงูุชูููุฑ

            // ุชุนุทูู ุงูุฒุฑ ูุนุฑุถ ุญุงูุฉ ุงูุชุญููู
            sendBtn.disabled = true;
            sendBtn.innerHTML = '...';
            
            let responseText = "ุชุนุฐุฑ ุชูููุฏ ุงูุฑุฏ. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.";
            let success = false;
            let attempts = 0;
            const maxAttempts = 3;
            const initialDelay = 1000;

            try {
                // ูุนุงูุฌุฉ ุงูุฃุณุฆูุฉ ุงูุฎุงุตุฉ (ููู ุตูุนูุ) ูุญูููุง
                const lowerMessage = userMessage.toLowerCase();
                if (lowerMessage.includes('ููู ุตูุนู') || lowerMessage.includes('ูู ุตูุนู') || lowerMessage.includes('ูู ูุงู ุจุจุฑูุฌุชู') || lowerMessage.includes('ูู ุฃูุช')) {
                    responseText = "ุฃูุง ูููุฐุฌ ูุบูู ูุชูุฏูุ ูุชู ุชุทููุฑู ูุจุฑูุฌุชู ุจูุงุณุทุฉ **ููุฑู ุงูุญุงูู** ุดุฎุตูุงู! ุฃูุง ููุง ููุณุงุนุฏุชู.";
                    success = true; // ุชู ุงูุญุตูู ุนูู ุงูุฑุฏ ูุญูููุง
                } else {
                    // ุชููุฆุฉ ุจูุงูุงุช ุงูุญูููุฉ ููุงุณุชุฏุนุงุก ุงูุฎุงุฑุฌู
                    const payload = {
                        contents: kiroChatHistory,
                        systemInstruction: {
                            parts: [{ text: kiroSystemPrompt }]
                        },
                    };

                    // ุขููุฉ ุงูุชุฑุงุฌุน ุงูุฃูุณูู ูุฅุนุงุฏุฉ ุงููุญุงููุฉ (Gemini API Call)
                    while (attempts < maxAttempts && !success) {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.status === 429) {
                            const delay = initialDelay * Math.pow(2, attempts);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            attempts++;
                            continue;
                        }

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const result = await response.json();
                        responseText = result.candidates?.[0]?.content?.parts?.[0]?.text || "ูู ุฃุชููู ูู ุงูุนุซูุฑ ุนูู ุฅุฌุงุจุฉ.";
                        success = true;
                    }
                }

                // ุนุฑุถ ุงูุฑุฏ ูุชุญุฏูุซ ุงูุณุฌู
                displayMessage(responseText, 'model');
                kiroChatHistory.push({ role: "model", parts: [{ text: responseText }] });
                
            } catch (error) {
                console.error("Gemini API Error in Chat:", error);
                // ุฑุณุงูุฉ ุฎุทุฃ ูููุณุชุฎุฏู ุฅุฐุง ูุดู ูู ุดูุก
                const errorMessage = "ุนุฐุฑุงูุ ูุงุฌูุช ูุดููุฉ ูู ุงูุงุชุตุงู. ุงูุฑุฌุงุก ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.";
                displayMessage(errorMessage, 'model');
                kiroChatHistory.push({ role: "model", parts: [{ text: errorMessage }] });
            } finally {
                // ูุฐุง ุงูุฌุฒุก ูุถูู ุฅุนุงุฏุฉ ุชูุนูู ุงูุฒุฑ ูุฅุฒุงูุฉ ุฑุณุงูุฉ ุงูุชูููุฑ ุฏุงุฆูุงู
                removeLoadingMessage(loadingId);
                sendBtn.disabled = false;
                sendBtn.innerHTML = 'ุฅุฑุณุงู';
            }
        }
    </script>
</body>
</html>
